<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8" />
<title>ğŸ„ åœ£è¯å¿«ä¹</title>
<style>
html,body{
  margin:0;
  background:radial-gradient(circle at top,#0b1d33,#000);
  overflow:hidden;
}
canvas{display:block;}
</style>
</head>
<body>
<canvas id="c"></canvas>

<script>
/* ========= ç”»å¸ƒï¼ˆé«˜åˆ†å±é€‚é…ï¼‰ ========= */
const c = document.getElementById("c");
const ctx = c.getContext("2d");
let dpr = window.devicePixelRatio || 1;

function resize(){
  const w = innerWidth;
  const h = innerHeight;
  c.width = w * dpr;
  c.height = h * dpr;
  c.style.width = w + "px";
  c.style.height = h + "px";
  ctx.setTransform(dpr,0,0,dpr,0,0);
}
resize();
addEventListener("resize", resize);

/* ========= æ ‘ä½ç½® ========= */
const treeX = innerWidth * 0.38;
const treeY = innerHeight * 0.78;

/* ========= æ ‘å±‚ ========= */
const layers=[
 {h:130,w:360},
 {h:120,w:320},
 {h:110,w:280},
 {h:100,w:240},
 {h: 90,w:200},
 {h: 80,w:160},
];

/* ========= é›ª ========= */
const snow=[...Array(200)].map(()=>({
 x:Math.random()*innerWidth,
 y:Math.random()*innerHeight,
 r:Math.random()*2+1,
 v:Math.random()*1.2+0.4,
 s:Math.random()*0.6
}));

function drawSnow(){
 ctx.fillStyle="white";
 snow.forEach(s=>{
  s.y+=s.v;
  s.x+=Math.sin(s.y*0.01)*s.s;
  if(s.y>innerHeight){s.y=-10;s.x=Math.random()*innerWidth;}
  ctx.beginPath();
  ctx.arc(s.x,s.y,s.r,0,Math.PI*2);
  ctx.fill();
 });
}

/* ========= æ ‘ ========= */
function drawBranchLayer(baseY,h,w,seed){
 for(let y=0;y<h;y++){
  const p=y/h;
  const width=w*(1-p);
  const noise=Math.sin((y+seed)*0.25)*10 + Math.sin(y*0.9)*6;
  const droop=p*p*14;
  const g=70+p*90;
  ctx.fillStyle=`rgb(20,${g},30)`;
  ctx.fillRect(treeX-width/2-noise/2,baseY-y+droop,width+noise,1);
 }
}

function drawTree(){
 let y=treeY;
 layers.forEach((l,i)=>{
  drawBranchLayer(y,l.h,l.w,i*40);
  y-=l.h-22;
 });
 ctx.fillStyle="#5a3a1c";
 ctx.fillRect(treeX-22,treeY,44,60);
}

/* ========= å½©ç¯ ========= */
const colors=["#ff4d4d","#ffd700","#00e5ff","#7CFF00","#ff7aff"];
const lights=[...Array(120)].map(()=>({
 layer:Math.floor(Math.random()*layers.length),
 t:Math.random(),
 phase:Math.random()*Math.PI*2,
 c:colors[Math.floor(Math.random()*colors.length)]
}));

function drawLights(t){
 lights.forEach(l=>{
  const offset=layers.slice(0,l.layer).reduce((a,b)=>a+b.h-22,0);
  const layer=layers[l.layer];
  const y=treeY-offset-l.t*layer.h;
  const r=layer.w*(1-l.t)/2;
  const x=treeX+Math.cos(l.t*8+t*0.002)*r;
  const glow=8+Math.sin(t*0.006+l.phase)*3;

  ctx.beginPath();
  ctx.fillStyle=l.c;
  ctx.shadowBlur=glow*3;
  ctx.shadowColor=l.c;
  ctx.arc(x,y,glow,0,Math.PI*2);
  ctx.fill();
 });
 ctx.shadowBlur=0;
}

/* ========= è‹¹æœ & ç³–æœ ========= */
const ornaments=[...Array(30)].map(()=>({
 layer:Math.floor(Math.random()*layers.length),
 t:Math.random(),
 a:Math.random()*Math.PI*2,
 type:Math.random()>0.5?"apple":"candy"
}));

function drawApple(x,y){
 ctx.fillStyle="#d60000";
 ctx.beginPath();
 ctx.arc(x,y,12,0,Math.PI*2);
 ctx.fill();
}

function drawCandy(x,y){
 ctx.save();
 ctx.translate(x,y);
 ctx.rotate(-Math.PI/6);
 ctx.lineWidth=4;
 for(let i=0;i<6;i++){
  ctx.strokeStyle=i%2?"#ff3b3b":"white";
  ctx.beginPath();
  ctx.moveTo(0,-10+i*4);
  ctx.lineTo(0,10+i*4);
  ctx.stroke();
 }
 ctx.restore();
}

function drawOrnaments(){
 ornaments.forEach(o=>{
  const offset=layers.slice(0,o.layer).reduce((a,b)=>a+b.h-22,0);
  const layer=layers[o.layer];
  const y=treeY-offset-o.t*layer.h;
  const r=layer.w*(1-o.t)/2;
  const x=treeX+Math.cos(o.a)*r;
  o.type==="apple"?drawApple(x,y):drawCandy(x,y);
 });
}

/* ========= å…‰ç¯ ========= */
function drawHalo(t){
 ctx.save();
 ctx.translate(treeX,treeY-220);
 ctx.rotate(t*0.0004);
 ctx.beginPath();
 ctx.strokeStyle="rgba(255,220,160,0.25)";
 ctx.lineWidth=5;
 ctx.shadowBlur=30;
 ctx.shadowColor="rgba(255,220,160,0.9)";
 ctx.arc(0,0,210,0,Math.PI*2);
 ctx.stroke();
 ctx.restore();
 ctx.shadowBlur=0;
}

/* ========= æ–‡å­— ========= */
function drawText(t){
 ctx.save();
 ctx.font="bold 42px 'Microsoft YaHei'";
 ctx.fillStyle="#ffeaa7";
 ctx.shadowBlur=25;
 ctx.shadowColor="#ffd700";
 const o=Math.sin(t*0.002)*6;
 ctx.fillText("ç¥å¾éœ²æ¶µ",innerWidth*0.62,innerHeight*0.42+o);
 ctx.fillText("åœ£è¯èŠ‚å¿«ä¹ ğŸ„",innerWidth*0.62,innerHeight*0.48+o);
 ctx.restore();
}

/* ========= åŠ¨ç”» ========= */
function animate(t){
 ctx.clearRect(0,0,innerWidth,innerHeight);
 drawSnow();
 drawTree();
 drawLights(t);
 drawOrnaments();
 drawHalo(t);
 drawText(t);
 requestAnimationFrame(animate);
}
animate();
</script>
</body>
</html>

animate();
</script>
</body>
</html>
